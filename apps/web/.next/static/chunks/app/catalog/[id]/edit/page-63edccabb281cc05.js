(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[188],{6712:function(e,t,s){Promise.resolve().then(s.bind(s,7726))},7726:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var l=s(7566),a=s(8276);let i="/api",n="demo-org";async function r(e){let t=await fetch("".concat(i,"/products/").concat(e),{headers:{"x-org":n},cache:"no-store"});if(!t.ok)throw Error("Failed to load product");return t.json()}function c(e){let{params:t}=e,{id:s}=t,[c,o]=(0,a.useState)(!0),[d,u]=(0,a.useState)({title:"",type:"physical",description:"",priceDollars:"",sku:"",inventoryQty:"0",status:"active"});async function p(e){e.preventDefault();let t=parseFloat(d.priceDollars.replace(/[^0-9.]/g,"")),l=Number.isFinite(t)?Math.round(100*t):0,a=Number(d.inventoryQty.replace(/[^0-9-]/g,"")),r=Number.isFinite(a)?a:0;await fetch("".concat(i,"/products/").concat(s),{method:"PUT",headers:{"Content-Type":"application/json","x-org":n},body:JSON.stringify({title:d.title,type:d.type,description:d.description||null,price:l,sku:d.sku||void 0,inventoryQty:r,status:d.status})}),window.location.href="/catalog?ts=".concat(Date.now())}return((0,a.useEffect)(()=>{let e=!0;return r(s).then(t=>{var s,l,a,i;e&&(u({title:t.title,type:t.type,description:null!==(s=t.description)&&void 0!==s?s:"",priceDollars:null!=t.price?(t.price/100).toFixed(2):"",sku:null!==(l=t.sku)&&void 0!==l?l:"",inventoryQty:String(null!==(a=t.inventoryQty)&&void 0!==a?a:0),status:null!==(i=t.status)&&void 0!==i?i:"active"}),o(!1))}).catch(()=>o(!1)),()=>{e=!1}},[s]),c)?(0,l.jsx)("div",{style:{padding:24},children:"Loadingâ€¦"}):(0,l.jsxs)("div",{className:"max-w-xl space-y-4 p-6",children:[(0,l.jsx)("h1",{className:"text-2xl font-semibold",children:"Edit product"}),(0,l.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium",children:"Title"}),(0,l.jsx)("input",{id:"title",className:"w-full rounded border p-2",value:d.title,onChange:e=>u(t=>({...t,title:e.target.value})),placeholder:"Title",required:!0})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{htmlFor:"type",className:"block text-sm font-medium",children:"Type"}),(0,l.jsxs)("select",{id:"type",className:"w-full rounded border p-2",value:d.type,onChange:e=>u(t=>({...t,type:e.target.value})),children:[(0,l.jsx)("option",{value:"physical",children:"physical"}),(0,l.jsx)("option",{value:"digital",children:"digital"}),(0,l.jsx)("option",{value:"service",children:"service"})]})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium",children:"Description (optional)"}),(0,l.jsx)("textarea",{id:"description",className:"w-full rounded border p-2",value:d.description,onChange:e=>u(t=>({...t,description:e.target.value})),placeholder:"Description (optional)",rows:4})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium",children:"Price (USD)"}),(0,l.jsx)("input",{id:"price",className:"w-full rounded border p-2",inputMode:"decimal",value:d.priceDollars,onChange:e=>u(t=>({...t,priceDollars:e.target.value})),placeholder:"e.g. 19.99"})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{htmlFor:"inventory",className:"block text-sm font-medium",children:"Inventory Qty"}),(0,l.jsx)("input",{id:"inventory",className:"w-full rounded border p-2",inputMode:"numeric",value:d.inventoryQty,onChange:e=>u(t=>({...t,inventoryQty:e.target.value})),placeholder:"0"})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium",children:"Status"}),(0,l.jsxs)("select",{id:"status",className:"w-full rounded border p-2",value:d.status,onChange:e=>u(t=>({...t,status:e.target.value})),children:[(0,l.jsx)("option",{value:"active",children:"active"}),(0,l.jsx)("option",{value:"archived",children:"archived"})]})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{htmlFor:"sku",className:"block text-sm font-medium",children:"SKU (optional)"}),(0,l.jsx)("input",{id:"sku",className:"w-full rounded border p-2",value:d.sku,onChange:e=>u(t=>({...t,sku:e.target.value})),placeholder:"auto if left blank"})]})]}),(0,l.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,l.jsx)("button",{type:"submit",className:"rounded border px-4 py-2",children:"Save"}),(0,l.jsx)("a",{href:"/catalog",className:"underline",children:"Cancel"})]})]})]})}n||console.warn("Missing NEXT_PUBLIC_ORG_ID")}},function(e){e.O(0,[151,649,744],function(){return e(e.s=6712)}),_N_E=e.O()}]);