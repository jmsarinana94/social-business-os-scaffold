{"file":"/Users/mannysarinana/Downloads/social-business-os-scaffold-v0.2/apps/api/src/prisma/prisma.service.ts","mappings":";;;;;;;;;;;;AAAA,2CAA2E;AAC3E,2CAAsD;AAEtD;;;GAGG;AAEI,IAAM,aAAa,GAAnB,MAAM,aACX,SAAQ,qBAAsD;IAG9D;QACE,KAAK,CAAC;YACJ,6CAA6C;YAC7C,GAAG,EAAE,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,OAAO,CAAC;SAChC,CAAC,CAAC;IACnC,CAAC;IAED,KAAK,CAAC,YAAY;QAChB,MAAM,IAAI,CAAC,QAAQ,EAAE,CAAC;QAEtB,2DAA2D;QAC3D,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,KAAK,IAAI,EAAE;YAChC,MAAM,IAAI,CAAC,WAAW,EAAE,CAAC;QAC3B,CAAC,CAAC,CAAC;IACL,CAAC;IAED,KAAK,CAAC,eAAe;QACnB,MAAM,IAAI,CAAC,WAAW,EAAE,CAAC;IAC3B,CAAC;CACF,CAAA;AAvBY,sCAAa;wBAAb,aAAa;IADzB,IAAA,mBAAU,GAAE;;GACA,aAAa,CAuBzB","names":[],"sources":["/Users/mannysarinana/Downloads/social-business-os-scaffold-v0.2/apps/api/src/prisma/prisma.service.ts"],"sourcesContent":["import { Injectable, OnModuleDestroy, OnModuleInit } from '@nestjs/common';\nimport { Prisma, PrismaClient } from '@prisma/client';\n\n/**\n * We extend PrismaClient and explicitly declare the event types we use\n * so `$on('beforeExit', ...)` is correctly typed.\n */\n@Injectable()\nexport class PrismaService\n  extends PrismaClient<Prisma.PrismaClientOptions, 'beforeExit'>\n  implements OnModuleInit, OnModuleDestroy\n{\n  constructor() {\n    super({\n      // keep logs quiet in tests, louder otherwise\n      log: process.env.NODE_ENV === 'test' ? [] : ['warn', 'error'],\n    } as Prisma.PrismaClientOptions);\n  }\n\n  async onModuleInit() {\n    await this.$connect();\n\n    // graceful shutdown when the Node process is about to exit\n    this.$on('beforeExit', async () => {\n      await this.$disconnect();\n    });\n  }\n\n  async onModuleDestroy() {\n    await this.$disconnect();\n  }\n}"],"version":3}