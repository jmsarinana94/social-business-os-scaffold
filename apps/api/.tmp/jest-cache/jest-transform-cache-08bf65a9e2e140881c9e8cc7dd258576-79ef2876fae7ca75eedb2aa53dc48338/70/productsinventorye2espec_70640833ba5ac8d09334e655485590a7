5673979685016e3b26c7479dbea6350b
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
// apps/api/test/e2e/products.inventory.e2e-spec.ts
const app_module_1 = require("@/app.module");
const testing_1 = require("@nestjs/testing");
const supertest_1 = __importDefault(require("supertest"));
const ORG = process.env.ORG || 'demo';
const PASS = process.env.API_PASS || 'password123';
// ALWAYS unique per run, do NOT read process.env.API_EMAIL
const EMAIL = `inv-${Date.now()}-${Math.random().toString(36).slice(2, 8)}@demo.io`;
describe('Products inventory (e2e)', () => {
    let app;
    let token;
    const base = () => (0, supertest_1.default)(app.getHttpServer());
    const baseHeaders = { 'x-org': ORG, 'content-type': 'application/json' };
    async function signup() {
        // Accept 201 Created or 409 Conflict (already exists)
        await base()
            .post('/auth/signup')
            .set(baseHeaders)
            .send({ email: EMAIL, password: PASS, name: 'Inventory Tester' })
            .ok(res => res.status === 201 || res.status === 409);
    }
    async function login() {
        return base()
            .post('/auth/login')
            .set(baseHeaders)
            .send({ email: EMAIL, password: PASS });
    }
    async function ensureLogin() {
        let res = await login();
        if (res.status === 401) {
            await signup();
            res = await login();
        }
        if (!(res.status === 200 || res.status === 201)) {
            throw new Error(`Login failed: expected 200/201, got ${res.status} (${res.text})`);
        }
        const tk = res.body?.access_token;
        if (!tk)
            throw new Error(`Missing access_token: ${JSON.stringify(res.body)}`);
        return tk;
    }
    beforeAll(async () => {
        const moduleRef = await testing_1.Test.createTestingModule({
            imports: [app_module_1.AppModule],
        }).compile();
        app = moduleRef.createNestApplication();
        await app.init();
        await signup();
        token = await ensureLogin();
    });
    afterAll(async () => {
        await app.close();
    });
    it('lists products and adjusts inventory +5, then rejects negative overshoot', async () => {
        // 1) List products
        const list = await base()
            .get('/products')
            .set({ ...baseHeaders, Authorization: `Bearer ${token}` })
            .expect(200);
        const items = list.body?.data ?? [];
        expect(Array.isArray(items)).toBe(true);
        expect(items.length).toBeGreaterThan(0);
        const product = items[0];
        expect(product).toHaveProperty('id');
        expect(typeof product.inventoryQty).toBe('number');
        // 2) Adjust +5 (accept 200 or 201)
        const up = await base()
            .post(`/products/${product.id}/inventory`)
            .set({ ...baseHeaders, Authorization: `Bearer ${token}` })
            .send({ delta: 5 })
            .ok(r => r.status === 200 || r.status === 201);
        const newQty = up.body?.inventoryQty;
        expect(typeof newQty).toBe('number');
        expect(newQty).toBe(product.inventoryQty + 5);
        // 3) Attempt negative overshoot (should 400)
        const negDelta = -(newQty + 1);
        await base()
            .post(`/products/${product.id}/inventory`)
            .set({ ...baseHeaders, Authorization: `Bearer ${token}` })
            .send({ delta: negDelta })
            .expect(400);
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL21hbm55c2FyaW5hbmEvRG93bmxvYWRzL3NvY2lhbC1idXNpbmVzcy1vcy1zY2FmZm9sZC12MC4yL2FwcHMvYXBpL3Rlc3QvZTJlL3Byb2R1Y3RzLmludmVudG9yeS5lMmUtc3BlYy50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLG1EQUFtRDtBQUNuRCw2Q0FBeUM7QUFFekMsNkNBQXVDO0FBQ3ZDLDBEQUE4QztBQUU5QyxNQUFNLEdBQUcsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxNQUFNLENBQUM7QUFDdEMsTUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLElBQUksYUFBYSxDQUFDO0FBQ25ELDJEQUEyRDtBQUMzRCxNQUFNLEtBQUssR0FBRyxPQUFPLElBQUksQ0FBQyxHQUFHLEVBQUUsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLFVBQVUsQ0FBQztBQUVwRixRQUFRLENBQUMsMEJBQTBCLEVBQUUsR0FBRyxFQUFFO0lBQ3hDLElBQUksR0FBcUIsQ0FBQztJQUMxQixJQUFJLEtBQWEsQ0FBQztJQUVsQixNQUFNLElBQUksR0FBRyxHQUFHLEVBQUUsQ0FBQyxJQUFBLG1CQUFPLEVBQUMsR0FBRyxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUM7SUFDaEQsTUFBTSxXQUFXLEdBQUcsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLGNBQWMsRUFBRSxrQkFBa0IsRUFBRSxDQUFDO0lBRXpFLEtBQUssVUFBVSxNQUFNO1FBQ25CLHNEQUFzRDtRQUN0RCxNQUFNLElBQUksRUFBRTthQUNULElBQUksQ0FBQyxjQUFjLENBQUM7YUFDcEIsR0FBRyxDQUFDLFdBQVcsQ0FBQzthQUNoQixJQUFJLENBQUMsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLGtCQUFrQixFQUFFLENBQUM7YUFD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ZHMvc29jaWFsLWJ1c2luZXNzLW9zLXNjYWZmb2xkLXYwLjIvYXBwcy9hcGkvdGVzdC9lMmUvcHJvZHVjdHMuaW52ZW50b3J5LmUyZS1zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGFwcHMvYXBpL3Rlc3QvZTJlL3Byb2R1Y3RzLmludmVudG9yeS5lMmUtc3BlYy50c1xuaW1wb3J0IHsgQXBwTW9kdWxlIH0gZnJvbSAnQC9hcHAubW9kdWxlJztcbmltcG9ydCB7IElOZXN0QXBwbGljYXRpb24gfSBmcm9tICdAbmVzdGpzL2NvbW1vbic7XG5pbXBvcnQgeyBUZXN0IH0gZnJvbSAnQG5lc3Rqcy90ZXN0aW5nJztcbmltcG9ydCByZXF1ZXN0LCB7IFJlc3BvbnNlIH0gZnJvbSAnc3VwZXJ0ZXN0JztcblxuY29uc3QgT1JHID0gcHJvY2Vzcy5lbnYuT1JHIHx8ICdkZW1vJztcbmNvbnN0IFBBU1MgPSBwcm9jZXNzLmVudi5BUElfUEFTUyB8fCAncGFzc3dvcmQxMjMnO1xuLy8gQUxXQVlTIHVuaXF1ZSBwZXIgcnVuLCBkbyBOT1QgcmVhZCBwcm9jZXNzLmVudi5BUElfRU1BSUxcbmNvbnN0IEVNQUlMID0gYGludi0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMiwgOCl9QGRlbW8uaW9gO1xuXG5kZXNjcmliZSgnUHJvZHVjdHMgaW52ZW50b3J5IChlMmUpJywgKCkgPT4ge1xuICBsZXQgYXBwOiBJTmVzdEFwcGxpY2F0aW9uO1xuICBsZXQgdG9rZW46IHN0cmluZztcblxuICBjb25zdCBiYXNlID0gKCkgPT4gcmVxdWVzdChhcHAuZ2V0SHR0cFNlcnZlcigpKTtcbiAgY29uc3QgYmFzZUhlYWRlcnMgPSB7ICd4LW9yZyc6IE9SRywgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9O1xuXG4gIGFzeW5jIGZ1bmN0aW9uIHNpZ251cCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBBY2NlcHQgMjAxIENyZWF0ZWQgb3IgNDA5IENvbmZsaWN0IChhbHJlYWR5IGV4aXN0cylcbiAgICBhd2FpdCBiYXNlKClcbiAgICAgIC5wb3N0KCcvYXV0aC9zaWdudXAnKVxuICAgICAgLnNldChiYXNlSGVhZGVycylcbiAgICAgIC5zZW5kKHsgZW1haWw6IEVNQUlMLCBwYXNzd29yZDogUEFTUywgbmFtZTogJ0ludmVudG9yeSBUZXN0ZXInIH0pXG4gICAgICAub2socmVzID0+IHJlcy5zdGF0dXMgPT09IDIwMSB8fCByZXMuc3RhdHVzID09PSA0MDkpO1xuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gbG9naW4oKTogUHJvbWlzZTxSZXNwb25zZT4ge1xuICAgIHJldHVybiBiYXNlKClcbiAgICAgIC5wb3N0KCcvYXV0aC9sb2dpbicpXG4gICAgICAuc2V0KGJhc2VIZWFkZXJzKVxuICAgICAgLnNlbmQoeyBlbWFpbDogRU1BSUwsIHBhc3N3b3JkOiBQQVNTIH0pO1xuICB9XG5cbiAgYXN5bmMgZnVuY3Rpb24gZW5zdXJlTG9naW4oKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBsZXQgcmVzID0gYXdhaXQgbG9naW4oKTtcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICBhd2FpdCBzaWdudXAoKTtcbiAgICAgIHJlcyA9IGF3YWl0IGxvZ2luKCk7XG4gICAgfVxuICAgIGlmICghKHJlcy5zdGF0dXMgPT09IDIwMCB8fCByZXMuc3RhdHVzID09PSAyMDEpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYExvZ2luIGZhaWxlZDogZXhwZWN0ZWQgMjAwLzIwMSwgZ290ICR7cmVzLnN0YXR1c30gKCR7cmVzLnRleHR9KWApO1xuICAgIH1cbiAgICBjb25zdCB0azogc3RyaW5nIHwgdW5kZWZpbmVkID0gcmVzLmJvZHk/LmFjY2Vzc190b2tlbjtcbiAgICBpZiAoIXRrKSB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgYWNjZXNzX3Rva2VuOiAke0pTT04uc3RyaW5naWZ5KHJlcy5ib2R5KX1gKTtcbiAgICByZXR1cm4gdGs7XG4gIH1cblxuICBiZWZvcmVBbGwoYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IG1vZHVsZVJlZiA9IGF3YWl0IFRlc3QuY3JlYXRlVGVzdGluZ01vZHVsZSh7XG4gICAgICBpbXBvcnRzOiBbQXBwTW9kdWxlXSxcbiAgICB9KS5jb21waWxlKCk7XG5cbiAgICBhcHAgPSBtb2R1bGVSZWYuY3JlYXRlTmVzdEFwcGxpY2F0aW9uKCk7XG4gICAgYXdhaXQgYXBwLmluaXQoKTtcblxuICAgIGF3YWl0IHNpZ251cCgpO1xuICAgIHRva2VuID0gYXdhaXQgZW5zdXJlTG9naW4oKTtcbiAgfSk7XG5cbiAgYWZ0ZXJBbGwoYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGFwcC5jbG9zZSgpO1xuICB9KTtcblxuICBpdCgnbGlzdHMgcHJvZHVjdHMgYW5kIGFkanVzdHMgaW52ZW50b3J5ICs1LCB0aGVuIHJlamVjdHMgbmVnYXRpdmUgb3ZlcnNob290JywgYXN5bmMgKCkgPT4ge1xuICAgIC8vIDEpIExpc3QgcHJvZHVjdHNcbiAgICBjb25zdCBsaXN0ID0gYXdhaXQgYmFzZSgpXG4gICAgICAuZ2V0KCcvcHJvZHVjdHMnKVxuICAgICAgLnNldCh7IC4uLmJhc2VIZWFkZXJzLCBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW59YCB9KVxuICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgY29uc3QgaXRlbXMgPSBsaXN0LmJvZHk/LmRhdGEgPz8gW107XG4gICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoaXRlbXMpKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChpdGVtcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcblxuICAgIGNvbnN0IHByb2R1Y3QgPSBpdGVtc1swXTtcbiAgICBleHBlY3QocHJvZHVjdCkudG9IYXZlUHJvcGVydHkoJ2lkJyk7XG4gICAgZXhwZWN0KHR5cGVvZiBwcm9kdWN0LmludmVudG9yeVF0eSkudG9CZSgnbnVtYmVyJyk7XG5cbiAgICAvLyAyKSBBZGp1c3QgKzUgKGFjY2VwdCAyMDAgb3IgMjAxKVxuICAgIGNvbnN0IHVwID0gYXdhaXQgYmFzZSgpXG4gICAgICAucG9zdChgL3Byb2R1Y3RzLyR7cHJvZHVjdC5pZH0vaW52ZW50b3J5YClcbiAgICAgIC5zZXQoeyAuLi5iYXNlSGVhZGVycywgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VufWAgfSlcbiAgICAgIC5zZW5kKHsgZGVsdGE6IDUgfSlcbiAgICAgIC5vayhyID0+IHIuc3RhdHVzID09PSAyMDAgfHwgci5zdGF0dXMgPT09IDIwMSk7XG5cbiAgICBjb25zdCBuZXdRdHkgPSB1cC5ib2R5Py5pbnZlbnRvcnlRdHk7XG4gICAgZXhwZWN0KHR5cGVvZiBuZXdRdHkpLnRvQmUoJ251bWJlcicpO1xuICAgIGV4cGVjdChuZXdRdHkpLnRvQmUocHJvZHVjdC5pbnZlbnRvcnlRdHkgKyA1KTtcblxuICAgIC8vIDMpIEF0dGVtcHQgbmVnYXRpdmUgb3ZlcnNob290IChzaG91bGQgNDAwKVxuICAgIGNvbnN0IG5lZ0RlbHRhID0gLShuZXdRdHkgKyAxKTtcbiAgICBhd2FpdCBiYXNlKClcbiAgICAgIC5wb3N0KGAvcHJvZHVjdHMvJHtwcm9kdWN0LmlkfS9pbnZlbnRvcnlgKVxuICAgICAgLnNldCh7IC4uLmJhc2VIZWFkZXJzLCBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW59YCB9KVxuICAgICAgLnNlbmQoeyBkZWx0YTogbmVnRGVsdGEgfSlcbiAgICAgIC5leHBlY3QoNDAwKTtcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=