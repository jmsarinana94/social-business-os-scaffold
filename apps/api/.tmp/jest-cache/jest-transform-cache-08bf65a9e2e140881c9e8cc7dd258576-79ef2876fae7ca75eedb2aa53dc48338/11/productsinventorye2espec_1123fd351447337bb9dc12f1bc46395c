0eebd7a849ff05933ccd534c02054ba1
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
// apps/api/test/e2e/products.inventory.e2e-spec.ts
const app_module_1 = require("@/app.module");
const testing_1 = require("@nestjs/testing");
const supertest_1 = __importDefault(require("supertest"));
const ORG = process.env.ORG || 'demo';
const EMAIL = process.env.API_EMAIL || 'tester@example.com';
const PASS = process.env.API_PASS || 'password123';
describe('Products inventory (e2e)', () => {
    let app;
    let token;
    const base = () => (0, supertest_1.default)(app.getHttpServer());
    const baseHeaders = { 'x-org': ORG, 'content-type': 'application/json' };
    async function signupIdempotent() {
        // Accept 201 (created) or 409 (already exists)
        await base()
            .post('/auth/signup')
            .set(baseHeaders)
            .send({ email: EMAIL, password: PASS, name: 'Inventory Tester' })
            .ok(res => res.status === 201 || res.status === 409);
    }
    async function tryLogin() {
        return base()
            .post('/auth/login')
            .set(baseHeaders)
            .send({ email: EMAIL, password: PASS });
    }
    async function ensureLogin() {
        // First attempt
        let res = await tryLogin();
        if (res.status === 401) {
            // Ensure user exists for this org and try again
            await signupIdempotent();
            res = await tryLogin();
        }
        // Some stacks return 200 OK, others 201 Created â€” accept both
        if (!(res.status === 200 || res.status === 201)) {
            throw new Error(`Login failed: expected 200/201, got ${res.status} (${res.text})`);
        }
        const tk = res.body?.access_token;
        if (!tk)
            throw new Error(`Login succeeded but no access_token in body: ${JSON.stringify(res.body)}`);
        return tk;
    }
    beforeAll(async () => {
        const moduleRef = await testing_1.Test.createTestingModule({
            imports: [app_module_1.AppModule],
        }).compile();
        app = moduleRef.createNestApplication();
        await app.init();
        await signupIdempotent();
        token = await ensureLogin();
    });
    afterAll(async () => {
        await app.close();
    });
    it('lists products and adjusts inventory +5, then rejects negative overshoot', async () => {
        // 1) List products
        const list = await base()
            .get('/products')
            .set({ ...baseHeaders, Authorization: `Bearer ${token}` })
            .expect(200);
        const items = list.body?.data ?? [];
        expect(Array.isArray(items)).toBe(true);
        expect(items.length).toBeGreaterThan(0);
        const product = items[0];
        expect(product).toHaveProperty('id');
        expect(product).toHaveProperty('inventoryQty');
        // 2) Adjust +5 (accept 200 or 201)
        const up = await base()
            .post(`/products/${product.id}/inventory`)
            .set({ ...baseHeaders, Authorization: `Bearer ${token}` })
            .send({ delta: 5 })
            .ok(r => r.status === 200 || r.status === 201);
        expect(typeof up.body?.inventoryQty).toBe('number');
        expect(up.body.inventoryQty).toBe(product.inventoryQty + 5);
        // 3) Attempt negative overshoot (should 400)
        const negDelta = -(up.body.inventoryQty + 1);
        await base()
            .post(`/products/${product.id}/inventory`)
            .set({ ...baseHeaders, Authorization: `Bearer ${token}` })
            .send({ delta: negDelta })
            .expect(400);
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL21hbm55c2FyaW5hbmEvRG93bmxvYWRzL3NvY2lhbC1idXNpbmVzcy1vcy1zY2FmZm9sZC12MC4yL2FwcHMvYXBpL3Rlc3QvZTJlL3Byb2R1Y3RzLmludmVudG9yeS5lMmUtc3BlYy50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLG1EQUFtRDtBQUNuRCw2Q0FBeUM7QUFFekMsNkNBQXVDO0FBQ3ZDLDBEQUE4QztBQUU5QyxNQUFNLEdBQUcsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxNQUFNLENBQUM7QUFDdEMsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLElBQUksb0JBQW9CLENBQUM7QUFDNUQsTUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLElBQUksYUFBYSxDQUFDO0FBRW5ELFFBQVEsQ0FBQywwQkFBMEIsRUFBRSxHQUFHLEVBQUU7SUFDeEMsSUFBSSxHQUFxQixDQUFDO0lBQzFCLElBQUksS0FBYSxDQUFDO0lBRWxCLE1BQU0sSUFBSSxHQUFHLEdBQUcsRUFBRSxDQUFDLElBQUEsbUJBQU8sRUFBQyxHQUFHLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQztJQUNoRCxNQUFNLFdBQVcsR0FBRyxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUUsY0FBYyxFQUFFLGtCQUFrQixFQUFFLENBQUM7SUFFekUsS0FBSyxVQUFVLGdCQUFnQjtRQUM3QiwrQ0FBK0M7UUFDL0MsTUFBTSxJQUFJLEVBQUU7YUFDVCxJQUFJLENBQUMsY0FBYyxDQUFDO2FBQ3BCLEdBQUcsQ0FBQyxXQUFXLENBQUM7YUFDaEIsSUFBSSxDQUFDLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxrQkFBa0IsRUFBRSxDQUFDO2FBQ2hFLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxNQUFNLEtBQUssR0FBRyxJQUFJLEdBQUcsQ0FBQyxNQUFNLEtBQUssR0FBRyxD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TSxJQUFJLEVBQUU7YUFDcEIsSUFBSSxDQUFDLGFBQWEsT0FBTyxDQUFDLEVBQUUsWUFBWSxDQUFDO2FBQ3pDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsV0FBVyxFQUFFLGFBQWEsRUFBRSxVQUFVLEtBQUssRUFBRSxFQUFFLENBQUM7YUFDekQsSUFBSSxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxDQUFDO2FBQ2xCLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsQ0FBQyxNQUFNLEtBQUssR0FBRyxDQUFDLENBQUM7UUFFakQsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFDLElBQUksRUFBRSxZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDcEQsTUFBTSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFFNUQsNkNBQTZDO1FBQzdDLE1BQU0sUUFBUSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsQ0FBQztRQUM3QyxNQUFNLElBQUksRUFBRTthQUNULElBQUksQ0FBQyxhQUFhLE9BQU8sQ0FBQyxFQUFFLFlBQVksQ0FBQzthQUN6QyxHQUFHLENBQUMsRUFBRSxHQUFHLFdBQVcsRUFBRSxhQUFhLEVBQUUsVUFBVSxLQUFLLEVBQUUsRUFBRSxDQUFDO2FBQ3pELElBQUksQ0FBQyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsQ0FBQzthQUN6QixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDakIsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvbWFubnlzYXJpbmFuYS9Eb3dubG9hZHMvc29jaWFsLWJ1c2luZXNzLW9zLXNjYWZmb2xkLXYwLjIvYXBwcy9hcGkvdGVzdC9lMmUvcHJvZHVjdHMuaW52ZW50b3J5LmUyZS1zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGFwcHMvYXBpL3Rlc3QvZTJlL3Byb2R1Y3RzLmludmVudG9yeS5lMmUtc3BlYy50c1xuaW1wb3J0IHsgQXBwTW9kdWxlIH0gZnJvbSAnQC9hcHAubW9kdWxlJztcbmltcG9ydCB7IElOZXN0QXBwbGljYXRpb24gfSBmcm9tICdAbmVzdGpzL2NvbW1vbic7XG5pbXBvcnQgeyBUZXN0IH0gZnJvbSAnQG5lc3Rqcy90ZXN0aW5nJztcbmltcG9ydCByZXF1ZXN0LCB7IFJlc3BvbnNlIH0gZnJvbSAnc3VwZXJ0ZXN0JztcblxuY29uc3QgT1JHID0gcHJvY2Vzcy5lbnYuT1JHIHx8ICdkZW1vJztcbmNvbnN0IEVNQUlMID0gcHJvY2Vzcy5lbnYuQVBJX0VNQUlMIHx8ICd0ZXN0ZXJAZXhhbXBsZS5jb20nO1xuY29uc3QgUEFTUyA9IHByb2Nlc3MuZW52LkFQSV9QQVNTIHx8ICdwYXNzd29yZDEyMyc7XG5cbmRlc2NyaWJlKCdQcm9kdWN0cyBpbnZlbnRvcnkgKGUyZSknLCAoKSA9PiB7XG4gIGxldCBhcHA6IElOZXN0QXBwbGljYXRpb247XG4gIGxldCB0b2tlbjogc3RyaW5nO1xuXG4gIGNvbnN0IGJhc2UgPSAoKSA9PiByZXF1ZXN0KGFwcC5nZXRIdHRwU2VydmVyKCkpO1xuICBjb25zdCBiYXNlSGVhZGVycyA9IHsgJ3gtb3JnJzogT1JHLCAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH07XG5cbiAgYXN5bmMgZnVuY3Rpb24gc2lnbnVwSWRlbXBvdGVudCgpIHtcbiAgICAvLyBBY2NlcHQgMjAxIChjcmVhdGVkKSBvciA0MDkgKGFscmVhZHkgZXhpc3RzKVxuICAgIGF3YWl0IGJhc2UoKVxuICAgICAgLnBvc3QoJy9hdXRoL3NpZ251cCcpXG4gICAgICAuc2V0KGJhc2VIZWFkZXJzKVxuICAgICAgLnNlbmQoeyBlbWFpbDogRU1BSUwsIHBhc3N3b3JkOiBQQVNTLCBuYW1lOiAnSW52ZW50b3J5IFRlc3RlcicgfSlcbiAgICAgIC5vayhyZXMgPT4gcmVzLnN0YXR1cyA9PT0gMjAxIHx8IHJlcy5zdGF0dXMgPT09IDQwOSk7XG4gIH1cblxuICBhc3luYyBmdW5jdGlvbiB0cnlMb2dpbigpOiBQcm9taXNlPFJlc3BvbnNlPiB7XG4gICAgcmV0dXJuIGJhc2UoKVxuICAgICAgLnBvc3QoJy9hdXRoL2xvZ2luJylcbiAgICAgIC5zZXQoYmFzZUhlYWRlcnMpXG4gICAgICAuc2VuZCh7IGVtYWlsOiBFTUFJTCwgcGFzc3dvcmQ6IFBBU1MgfSk7XG4gIH1cblxuICBhc3luYyBmdW5jdGlvbiBlbnN1cmVMb2dpbigpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIC8vIEZpcnN0IGF0dGVtcHRcbiAgICBsZXQgcmVzID0gYXdhaXQgdHJ5TG9naW4oKTtcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAvLyBFbnN1cmUgdXNlciBleGlzdHMgZm9yIHRoaXMgb3JnIGFuZCB0cnkgYWdhaW5cbiAgICAgIGF3YWl0IHNpZ251cElkZW1wb3RlbnQoKTtcbiAgICAgIHJlcyA9IGF3YWl0IHRyeUxvZ2luKCk7XG4gICAgfVxuICAgIC8vIFNvbWUgc3RhY2tzIHJldHVybiAyMDAgT0ssIG90aGVycyAyMDEgQ3JlYXRlZCDigJQgYWNjZXB0IGJvdGhcbiAgICBpZiAoIShyZXMuc3RhdHVzID09PSAyMDAgfHwgcmVzLnN0YXR1cyA9PT0gMjAxKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBMb2dpbiBmYWlsZWQ6IGV4cGVjdGVkIDIwMC8yMDEsIGdvdCAke3Jlcy5zdGF0dXN9ICgke3Jlcy50ZXh0fSlgKTtcbiAgICB9XG4gICAgY29uc3QgdGsgPSByZXMuYm9keT8uYWNjZXNzX3Rva2VuO1xuICAgIGlmICghdGspIHRocm93IG5ldyBFcnJvcihgTG9naW4gc3VjY2VlZGVkIGJ1dCBubyBhY2Nlc3NfdG9rZW4gaW4gYm9keTogJHtKU09OLnN0cmluZ2lmeShyZXMuYm9keSl9YCk7XG4gICAgcmV0dXJuIHRrO1xuICB9XG5cbiAgYmVmb3JlQWxsKGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBtb2R1bGVSZWYgPSBhd2FpdCBUZXN0LmNyZWF0ZVRlc3RpbmdNb2R1bGUoe1xuICAgICAgaW1wb3J0czogW0FwcE1vZHVsZV0sXG4gICAgfSkuY29tcGlsZSgpO1xuXG4gICAgYXBwID0gbW9kdWxlUmVmLmNyZWF0ZU5lc3RBcHBsaWNhdGlvbigpO1xuICAgIGF3YWl0IGFwcC5pbml0KCk7XG5cbiAgICBhd2FpdCBzaWdudXBJZGVtcG90ZW50KCk7XG4gICAgdG9rZW4gPSBhd2FpdCBlbnN1cmVMb2dpbigpO1xuICB9KTtcblxuICBhZnRlckFsbChhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgYXBwLmNsb3NlKCk7XG4gIH0pO1xuXG4gIGl0KCdsaXN0cyBwcm9kdWN0cyBhbmQgYWRqdXN0cyBpbnZlbnRvcnkgKzUsIHRoZW4gcmVqZWN0cyBuZWdhdGl2ZSBvdmVyc2hvb3QnLCBhc3luYyAoKSA9PiB7XG4gICAgLy8gMSkgTGlzdCBwcm9kdWN0c1xuICAgIGNvbnN0IGxpc3QgPSBhd2FpdCBiYXNlKClcbiAgICAgIC5nZXQoJy9wcm9kdWN0cycpXG4gICAgICAuc2V0KHsgLi4uYmFzZUhlYWRlcnMsIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gIH0pXG4gICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICBjb25zdCBpdGVtcyA9IGxpc3QuYm9keT8uZGF0YSA/PyBbXTtcbiAgICBleHBlY3QoQXJyYXkuaXNBcnJheShpdGVtcykpLnRvQmUodHJ1ZSk7XG4gICAgZXhwZWN0KGl0ZW1zLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuXG4gICAgY29uc3QgcHJvZHVjdCA9IGl0ZW1zWzBdO1xuICAgIGV4cGVjdChwcm9kdWN0KS50b0hhdmVQcm9wZXJ0eSgnaWQnKTtcbiAgICBleHBlY3QocHJvZHVjdCkudG9IYXZlUHJvcGVydHkoJ2ludmVudG9yeVF0eScpO1xuXG4gICAgLy8gMikgQWRqdXN0ICs1IChhY2NlcHQgMjAwIG9yIDIwMSlcbiAgICBjb25zdCB1cCA9IGF3YWl0IGJhc2UoKVxuICAgICAgLnBvc3QoYC9wcm9kdWN0cy8ke3Byb2R1Y3QuaWR9L2ludmVudG9yeWApXG4gICAgICAuc2V0KHsgLi4uYmFzZUhlYWRlcnMsIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gIH0pXG4gICAgICAuc2VuZCh7IGRlbHRhOiA1IH0pXG4gICAgICAub2sociA9PiByLnN0YXR1cyA9PT0gMjAwIHx8IHIuc3RhdHVzID09PSAyMDEpO1xuXG4gICAgZXhwZWN0KHR5cGVvZiB1cC5ib2R5Py5pbnZlbnRvcnlRdHkpLnRvQmUoJ251bWJlcicpO1xuICAgIGV4cGVjdCh1cC5ib2R5LmludmVudG9yeVF0eSkudG9CZShwcm9kdWN0LmludmVudG9yeVF0eSArIDUpO1xuXG4gICAgLy8gMykgQXR0ZW1wdCBuZWdhdGl2ZSBvdmVyc2hvb3QgKHNob3VsZCA0MDApXG4gICAgY29uc3QgbmVnRGVsdGEgPSAtKHVwLmJvZHkuaW52ZW50b3J5UXR5ICsgMSk7XG4gICAgYXdhaXQgYmFzZSgpXG4gICAgICAucG9zdChgL3Byb2R1Y3RzLyR7cHJvZHVjdC5pZH0vaW52ZW50b3J5YClcbiAgICAgIC5zZXQoeyAuLi5iYXNlSGVhZGVycywgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VufWAgfSlcbiAgICAgIC5zZW5kKHsgZGVsdGE6IG5lZ0RlbHRhIH0pXG4gICAgICAuZXhwZWN0KDQwMCk7XG4gIH0pO1xufSk7Il0sInZlcnNpb24iOjN9