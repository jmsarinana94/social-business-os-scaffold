{"file":"/Users/mannysarinana/Downloads/social-business-os-scaffold-v0.2/apps/api/src/modules/auth/auth.controller.ts","mappings":";;;;;;;;;;;;;;;AAAA,2CAUwB;AAExB,iDAA6C;AAC7C,sEAAsE;AACtE,qDAAgD;AAMzC,IAAM,cAAc,GAApB,MAAM,cAAc;IACzB,YAA6B,IAAiB;QAAjB,SAAI,GAAJ,IAAI,CAAa;IAAG,CAAC;IAG5C,AAAN,KAAK,CAAC,MAAM,CACQ,SAA6B,EACvC,GAAa;QAErB,MAAM,OAAO,GAAG;YACd,GAAG,EAAE,SAAS,IAAI,MAAM;YACxB,KAAK,EAAE,GAAG,CAAC,KAAK;YAChB,QAAQ,EAAE,GAAG,CAAC,QAAQ;SACvB,CAAC;QACF,OAAO,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;IACnC,CAAC;IAIK,AAAN,KAAK,CAAC,KAAK,CACS,SAA6B,EACvC,GAAa;QAErB,MAAM,OAAO,GAAG;YACd,GAAG,EAAE,SAAS,IAAI,MAAM;YACxB,KAAK,EAAE,GAAG,CAAC,KAAK;YAChB,QAAQ,EAAE,GAAG,CAAC,QAAQ;SACvB,CAAC;QACF,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;IAClC,CAAC;IAIK,AAAN,KAAK,CAAC,EAAE,CAAQ,GAAY;QAC1B,MAAM,IAAI,GAAI,GAAW,CAAC,IAAI,IAAI,EAAE,CAAC;QACrC,OAAO,EAAE,EAAE,EAAE,IAAI,CAAC,GAAG,IAAI,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,IAAI,IAAI,EAAE,CAAC;IAC7D,CAAC;CACF,CAAA;AApCY,wCAAc;AAInB;IADL,IAAA,aAAI,EAAC,QAAQ,CAAC;IAEZ,WAAA,IAAA,gBAAO,EAAC,OAAO,CAAC,CAAA;IAChB,WAAA,IAAA,aAAI,GAAE,CAAA;;;;4CAQR;AAIK;IAFL,IAAA,aAAI,EAAC,OAAO,CAAC;IACb,IAAA,iBAAQ,EAAC,mBAAU,CAAC,EAAE,CAAC;IAErB,WAAA,IAAA,gBAAO,EAAC,OAAO,CAAC,CAAA;IAChB,WAAA,IAAA,aAAI,GAAE,CAAA;;;;2CAQR;AAIK;IAFL,IAAA,YAAG,EAAC,IAAI,CAAC;IACT,IAAA,kBAAS,EAAC,6BAAY,CAAC;IACd,WAAA,IAAA,YAAG,GAAE,CAAA;;;;wCAGd;yBAnCU,cAAc;IAD1B,IAAA,mBAAU,EAAC,MAAM,CAAC;qCAEkB,0BAAW;GADnC,cAAc,CAoC1B","names":[],"sources":["/Users/mannysarinana/Downloads/social-business-os-scaffold-v0.2/apps/api/src/modules/auth/auth.controller.ts"],"sourcesContent":["import {\n  Body,\n  Controller,\n  Get,\n  Headers,\n  HttpCode,\n  HttpStatus,\n  Post,\n  Req,\n  UseGuards,\n} from '@nestjs/common';\nimport { Request } from 'express';\nimport { AuthService } from './auth.service';\n// If your guard lives elsewhere, adjust this import path accordingly:\nimport { JwtAuthGuard } from './jwt-auth.guard';\n\n// Simple DTOs for request bodies\ntype CredsDto = { email: string; password: string };\n\n@Controller('auth')\nexport class AuthController {\n  constructor(private readonly auth: AuthService) {}\n\n  @Post('signup')\n  async signup(\n    @Headers('x-org') orgHeader: string | undefined,\n    @Body() dto: CredsDto,\n  ) {\n    const payload = {\n      org: orgHeader ?? 'demo',\n      email: dto.email,\n      password: dto.password,\n    };\n    return this.auth.signup(payload);\n  }\n\n  @Post('login')\n  @HttpCode(HttpStatus.OK)\n  async login(\n    @Headers('x-org') orgHeader: string | undefined,\n    @Body() dto: CredsDto,\n  ) {\n    const payload = {\n      org: orgHeader ?? 'demo',\n      email: dto.email,\n      password: dto.password,\n    };\n    return this.auth.login(payload);\n  }\n\n  @Get('me')\n  @UseGuards(JwtAuthGuard)\n  async me(@Req() req: Request) {\n    const user = (req as any).user || {};\n    return { id: user.sub ?? null, email: user.email ?? null };\n  }\n}"],"version":3}