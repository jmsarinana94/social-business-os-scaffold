{"file":"/Users/mannysarinana/Downloads/social-business-os-scaffold-v0.2/apps/api/src/modules/auth/auth.controller.ts","mappings":";;;;;;;;;;;;;;;AAAA,2CASwB;AACxB,iDAA6C;AAC7C,qEAAuD;AACvD,2CAA2C;AAMpC,IAAM,cAAc,GAApB,MAAM,cAAc;IACzB,YAA6B,IAAiB;QAAjB,SAAI,GAAJ,IAAI,CAAa;IAAG,CAAC;IAG5C,AAAN,KAAK,CAAC,MAAM,CACQ,GAAuB,EACjC,GAAc;QAEtB,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;YACnC,GAAG,EAAE,GAAG,IAAI,MAAM;YAClB,KAAK,EAAE,GAAG,CAAC,KAAK;YAChB,QAAQ,EAAE,GAAG,CAAC,QAAQ;SACvB,CAAC,CAAC;QACH,OAAO,EAAE,YAAY,EAAE,KAAK,EAAE,CAAC;IACjC,CAAC;IAIK,AAAN,KAAK,CAAC,KAAK,CACS,GAAuB,EACjC,GAAa;QAErB,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;YAClC,GAAG,EAAE,GAAG,IAAI,MAAM;YAClB,KAAK,EAAE,GAAG,CAAC,KAAK;YAChB,QAAQ,EAAE,GAAG,CAAC,QAAQ;SACvB,CAAC,CAAC;QACH,OAAO,EAAE,YAAY,EAAE,KAAK,EAAE,CAAC;IACjC,CAAC;IAIK,AAAN,KAAK,CAAC,EAAE,CACY,GAAuB,EACrB,MAA0B,EACxB,YAAgC;QAEtD,MAAM,OAAO,GAAG,GAAG,IAAI,MAAM,CAAC;QAC9B,OAAO,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,OAAO,EAAE,MAAM,EAAE,KAAK,EAAE,YAAY,EAAE,CAAC,CAAC;IACrE,CAAC;CACF,CAAA;AAxCY,wCAAc;AAInB;IADL,IAAA,aAAI,EAAC,QAAQ,CAAC;IAEZ,WAAA,IAAA,gBAAO,EAAC,OAAO,CAAC,CAAA;IAChB,WAAA,IAAA,aAAI,GAAE,CAAA;;;;4CAQR;AAIK;IAFL,IAAA,aAAI,EAAC,OAAO,CAAC;IACb,IAAA,iBAAQ,EAAC,mBAAU,CAAC,EAAE,CAAC;IAErB,WAAA,IAAA,gBAAO,EAAC,OAAO,CAAC,CAAA;IAChB,WAAA,IAAA,aAAI,GAAE,CAAA;;;;2CAQR;AAIK;IAFL,IAAA,YAAG,EAAC,IAAI,CAAC;IACT,IAAA,kBAAS,EAAC,wBAAY,CAAC;IAErB,WAAA,IAAA,gBAAO,EAAC,OAAO,CAAC,CAAA;IAChB,WAAA,IAAA,oCAAW,EAAC,KAAK,CAAC,CAAA;IAClB,WAAA,IAAA,oCAAW,EAAC,OAAO,CAAC,CAAA;;;;wCAItB;yBAvCU,cAAc;IAD1B,IAAA,mBAAU,EAAC,MAAM,CAAC;qCAEkB,0BAAW;GADnC,cAAc,CAwC1B","names":[],"sources":["/Users/mannysarinana/Downloads/social-business-os-scaffold-v0.2/apps/api/src/modules/auth/auth.controller.ts"],"sourcesContent":["import {\n  Body,\n  Controller,\n  Get,\n  Headers,\n  HttpCode,\n  HttpStatus,\n  Post,\n  UseGuards,\n} from '@nestjs/common';\nimport { AuthService } from './auth.service';\nimport { CurrentUser } from './current-user.decorator';\nimport { JwtAuthGuard } from './jwt.guard';\n\ntype SignupDto = { email: string; password: string };\ntype LoginDto = { email: string; password: string };\n\n@Controller('auth')\nexport class AuthController {\n  constructor(private readonly auth: AuthService) {}\n\n  @Post('signup')\n  async signup(\n    @Headers('x-org') org: string | undefined,\n    @Body() dto: SignupDto,\n  ) {\n    const token = await this.auth.signup({\n      org: org || 'demo',\n      email: dto.email,\n      password: dto.password,\n    });\n    return { access_token: token };\n  }\n\n  @Post('login')\n  @HttpCode(HttpStatus.OK)\n  async login(\n    @Headers('x-org') org: string | undefined,\n    @Body() dto: LoginDto,\n  ) {\n    const token = await this.auth.login({\n      org: org || 'demo',\n      email: dto.email,\n      password: dto.password,\n    });\n    return { access_token: token };\n  }\n\n  @Get('me')\n  @UseGuards(JwtAuthGuard)\n  async me(\n    @Headers('x-org') org: string | undefined,\n    @CurrentUser('sub') userId: string | undefined,\n    @CurrentUser('email') emailFromJwt: string | undefined,\n  ) {\n    const orgSlug = org || 'demo';\n    return this.auth.me({ org: orgSlug, userId, email: emailFromJwt });\n  }\n}"],"version":3}