{"file":"/Users/mannysarinana/Downloads/social-business-os-scaffold-v0.2/apps/api/src/modules/auth/auth.controller.ts","mappings":";;;;;;;;;;;;;;;AAAA,2CAUwB;AACxB,iDAA6C,CAAC,iBAAiB;AAC/D,4DAAuD;AAKhD,IAAM,cAAc,GAApB,MAAM,cAAc;IACzB,YAA6B,IAAiB;QAAjB,SAAI,GAAJ,IAAI,CAAa;IAAG,CAAC;IAElD,mCAAmC;IAE7B,AAAN,KAAK,CAAC,MAAM,CAAmB,GAAuB,EAAU,GAAY;QAC1E,MAAM,IAAI,GAAG,CAAC,GAAG,IAAI,OAAO,CAAC,GAAG,CAAC,GAAG,IAAI,MAAM,CAAC,CAAC,IAAI,EAAE,CAAC;QACvD,OAAO,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,EAAE,QAAQ,EAAE,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC;IACnF,CAAC;IAED,6BAA6B;IAGvB,AAAN,KAAK,CAAC,KAAK,CAAmB,GAAuB,EAAU,GAAY;QACzE,MAAM,IAAI,GAAG,CAAC,GAAG,IAAI,OAAO,CAAC,GAAG,CAAC,GAAG,IAAI,MAAM,CAAC,CAAC,IAAI,EAAE,CAAC;QACvD,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,CAAC,KAAK,EAAE,QAAQ,EAAE,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC;IAClF,CAAC;IAED,uCAAuC;IAGjC,AAAN,KAAK,CAAC,EAAE,CAAQ,GAAQ;QACtB,kEAAkE;QAClE,MAAM,MAAM,GAAuB,GAAG,EAAE,IAAI,EAAE,GAAG,CAAC;QAClD,OAAO,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,MAAO,CAAC,CAAC;IAC/B,CAAC;CACF,CAAA;AA1BY,wCAAc;AAKnB;IADL,IAAA,aAAI,EAAC,QAAQ,CAAC;IACD,WAAA,IAAA,gBAAO,EAAC,OAAO,CAAC,CAAA;IAA2B,WAAA,IAAA,aAAI,GAAE,CAAA;;;;4CAG9D;AAKK;IAFL,IAAA,aAAI,EAAC,OAAO,CAAC;IACb,IAAA,iBAAQ,EAAC,mBAAU,CAAC,EAAE,CAAC;IACX,WAAA,IAAA,gBAAO,EAAC,OAAO,CAAC,CAAA;IAA2B,WAAA,IAAA,aAAI,GAAE,CAAA;;;;2CAG7D;AAKK;IAFL,IAAA,YAAG,EAAC,IAAI,CAAC;IACT,IAAA,kBAAS,EAAC,6BAAY,CAAC;IACd,WAAA,IAAA,YAAG,GAAE,CAAA;;;;wCAId;yBAzBU,cAAc;IAD1B,IAAA,mBAAU,EAAC,MAAM,CAAC;qCAEkB,0BAAW;GADnC,cAAc,CA0B1B","names":[],"sources":["/Users/mannysarinana/Downloads/social-business-os-scaffold-v0.2/apps/api/src/modules/auth/auth.controller.ts"],"sourcesContent":["import {\n  Body,\n  Controller,\n  Get,\n  Headers,\n  HttpCode,\n  HttpStatus,\n  Post,\n  Req,\n  UseGuards,\n} from '@nestjs/common';\nimport { AuthService } from './auth.service'; // â† named import\nimport { JwtAuthGuard } from './guards/jwt-auth.guard';\n\ntype AuthDto = { email: string; password: string; name?: string };\n\n@Controller('auth')\nexport class AuthController {\n  constructor(private readonly auth: AuthService) {}\n\n  // POST /auth/signup -> 201 Created\n  @Post('signup')\n  async signup(@Headers('x-org') org: string | undefined, @Body() dto: AuthDto) {\n    const slug = (org ?? process.env.ORG ?? 'demo').trim();\n    return this.auth.signup({ org: slug, email: dto.email, password: dto.password });\n  }\n\n  // POST /auth/login -> 200 OK\n  @Post('login')\n  @HttpCode(HttpStatus.OK)\n  async login(@Headers('x-org') org: string | undefined, @Body() dto: AuthDto) {\n    const slug = (org ?? process.env.ORG ?? 'demo').trim();\n    return this.auth.login({ org: slug, email: dto.email, password: dto.password });\n  }\n\n  // GET /auth/me (Bearer token required)\n  @Get('me')\n  @UseGuards(JwtAuthGuard)\n  async me(@Req() req: any) {\n    // JwtStrategy should set req.user = { sub, email, iat, exp, ... }\n    const userId: string | undefined = req?.user?.sub;\n    return this.auth.me(userId!);\n  }\n}"],"version":3}