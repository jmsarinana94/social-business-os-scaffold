199741dda695cf199551e40e509609dc
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
// apps/api/test/e2e/products.inventory.e2e-spec.ts
const app_module_1 = require("@/app.module");
const testing_1 = require("@nestjs/testing");
const supertest_1 = __importDefault(require("supertest"));
const ORG = process.env.ORG || 'demo';
const PASS = process.env.API_PASS || 'password123';
// Use a unique email each run to avoid collisions with existing users/passwords
const EMAIL = process.env.API_EMAIL || `inv-${Date.now()}@demo.io`;
describe('Products inventory (e2e)', () => {
    let app;
    let token;
    const base = () => (0, supertest_1.default)(app.getHttpServer());
    const baseHeaders = { 'x-org': ORG, 'content-type': 'application/json' };
    async function signup() {
        // Accept 201 Created or 409 Conflict (already exists)
        await base()
            .post('/auth/signup')
            .set(baseHeaders)
            .send({ email: EMAIL, password: PASS, name: 'Inventory Tester' })
            .ok(res => res.status === 201 || res.status === 409);
    }
    async function login() {
        return base()
            .post('/auth/login')
            .set(baseHeaders)
            .send({ email: EMAIL, password: PASS });
    }
    async function ensureLogin() {
        // Try login; if unauthorized, (re)signup with the fresh email and retry.
        let res = await login();
        if (res.status === 401) {
            await signup();
            res = await login();
        }
        if (!(res.status === 200 || res.status === 201)) {
            throw new Error(`Login failed: expected 200/201, got ${res.status} (${res.text})`);
        }
        const tk = res.body?.access_token;
        if (!tk)
            throw new Error(`Missing access_token: ${JSON.stringify(res.body)}`);
        return tk;
    }
    beforeAll(async () => {
        const moduleRef = await testing_1.Test.createTestingModule({
            imports: [app_module_1.AppModule],
        }).compile();
        app = moduleRef.createNestApplication();
        await app.init();
        await signup();
        token = await ensureLogin();
    });
    afterAll(async () => {
        await app.close();
    });
    it('lists products and adjusts inventory +5, then rejects negative overshoot', async () => {
        // 1) List products
        const list = await base()
            .get('/products')
            .set({ ...baseHeaders, Authorization: `Bearer ${token}` })
            .expect(200);
        const items = list.body?.data ?? [];
        expect(Array.isArray(items)).toBe(true);
        expect(items.length).toBeGreaterThan(0);
        const product = items[0];
        expect(product).toHaveProperty('id');
        expect(typeof product.inventoryQty).toBe('number');
        // 2) Adjust +5 (accept 200 or 201 depending on implementation)
        const up = await base()
            .post(`/products/${product.id}/inventory`)
            .set({ ...baseHeaders, Authorization: `Bearer ${token}` })
            .send({ delta: 5 })
            .ok(r => r.status === 200 || r.status === 201);
        const newQty = up.body?.inventoryQty;
        expect(typeof newQty).toBe('number');
        expect(newQty).toBe(product.inventoryQty + 5);
        // 3) Attempt negative overshoot (should 400)
        const negDelta = -(newQty + 1);
        await base()
            .post(`/products/${product.id}/inventory`)
            .set({ ...baseHeaders, Authorization: `Bearer ${token}` })
            .send({ delta: negDelta })
            .expect(400);
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL21hbm55c2FyaW5hbmEvRG93bmxvYWRzL3NvY2lhbC1idXNpbmVzcy1vcy1zY2FmZm9sZC12MC4yL2FwcHMvYXBpL3Rlc3QvZTJlL3Byb2R1Y3RzLmludmVudG9yeS5lMmUtc3BlYy50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLG1EQUFtRDtBQUNuRCw2Q0FBeUM7QUFFekMsNkNBQXVDO0FBQ3ZDLDBEQUE4QztBQUU5QyxNQUFNLEdBQUcsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxNQUFNLENBQUM7QUFDdEMsTUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLElBQUksYUFBYSxDQUFDO0FBQ25ELGdGQUFnRjtBQUNoRixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLFNBQVMsSUFBSSxPQUFPLElBQUksQ0FBQyxHQUFHLEVBQUUsVUFBVSxDQUFDO0FBRW5FLFFBQVEsQ0FBQywwQkFBMEIsRUFBRSxHQUFHLEVBQUU7SUFDeEMsSUFBSSxHQUFxQixDQUFDO0lBQzFCLElBQUksS0FBYSxDQUFDO0lBRWxCLE1BQU0sSUFBSSxHQUFHLEdBQUcsRUFBRSxDQUFDLElBQUEsbUJBQU8sRUFBQyxHQUFHLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQztJQUNoRCxNQUFNLFdBQVcsR0FBRyxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUUsY0FBYyxFQUFFLGtCQUFrQixFQUFFLENBQUM7SUFFekUsS0FBSyxVQUFVLE1BQU07UUFDbkIsc0RBQXNEO1FBQ3RELE1BQU0sSUFBSSxFQUFFO2FBQ1QsSUFBSSxDQUFDLGNBQWMsQ0FBQzthQUNwQixHQUFHLENBQUMsV0FBVyxDQUFDO2FBQ2hCLElBQUksQ0FBQyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsa0JBQWtCLEVBQUUsQ0FBQzthQUNoRSxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsTUFBTSxLQUFLLEdB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TUFBTSxFQUFFLEdBQUcsTUFBTSxJQUFJLEVBQUU7YUFDcEIsSUFBSSxDQUFDLGFBQWEsT0FBTyxDQUFDLEVBQUUsWUFBWSxDQUFDO2FBQ3pDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsV0FBVyxFQUFFLGFBQWEsRUFBRSxVQUFVLEtBQUssRUFBRSxFQUFFLENBQUM7YUFDekQsSUFBSSxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxDQUFDO2FBQ2xCLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsQ0FBQyxNQUFNLEtBQUssR0FBRyxDQUFDLENBQUM7UUFFakQsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDLElBQUksRUFBRSxZQUFZLENBQUM7UUFDckMsTUFBTSxDQUFDLE9BQU8sTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3JDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsQ0FBQztRQUU5Qyw2Q0FBNkM7UUFDN0MsTUFBTSxRQUFRLEdBQUcsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztRQUMvQixNQUFNLElBQUksRUFBRTthQUNULElBQUksQ0FBQyxhQUFhLE9BQU8sQ0FBQyxFQUFFLFlBQVksQ0FBQzthQUN6QyxHQUFHLENBQUMsRUFBRSxHQUFHLFdBQVcsRUFBRSxhQUFhLEVBQUUsVUFBVSxLQUFLLEVBQUUsRUFBRSxDQUFDO2FBQ3pELElBQUksQ0FBQyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsQ0FBQzthQUN6QixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDakIsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvbWFubnlzYXJpbmFuYS9Eb3dubG9hZHMvc29jaWFsLWJ1c2luZXNzLW9zLXNjYWZmb2xkLXYwLjIvYXBwcy9hcGkvdGVzdC9lMmUvcHJvZHVjdHMuaW52ZW50b3J5LmUyZS1zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGFwcHMvYXBpL3Rlc3QvZTJlL3Byb2R1Y3RzLmludmVudG9yeS5lMmUtc3BlYy50c1xuaW1wb3J0IHsgQXBwTW9kdWxlIH0gZnJvbSAnQC9hcHAubW9kdWxlJztcbmltcG9ydCB7IElOZXN0QXBwbGljYXRpb24gfSBmcm9tICdAbmVzdGpzL2NvbW1vbic7XG5pbXBvcnQgeyBUZXN0IH0gZnJvbSAnQG5lc3Rqcy90ZXN0aW5nJztcbmltcG9ydCByZXF1ZXN0LCB7IFJlc3BvbnNlIH0gZnJvbSAnc3VwZXJ0ZXN0JztcblxuY29uc3QgT1JHID0gcHJvY2Vzcy5lbnYuT1JHIHx8ICdkZW1vJztcbmNvbnN0IFBBU1MgPSBwcm9jZXNzLmVudi5BUElfUEFTUyB8fCAncGFzc3dvcmQxMjMnO1xuLy8gVXNlIGEgdW5pcXVlIGVtYWlsIGVhY2ggcnVuIHRvIGF2b2lkIGNvbGxpc2lvbnMgd2l0aCBleGlzdGluZyB1c2Vycy9wYXNzd29yZHNcbmNvbnN0IEVNQUlMID0gcHJvY2Vzcy5lbnYuQVBJX0VNQUlMIHx8IGBpbnYtJHtEYXRlLm5vdygpfUBkZW1vLmlvYDtcblxuZGVzY3JpYmUoJ1Byb2R1Y3RzIGludmVudG9yeSAoZTJlKScsICgpID0+IHtcbiAgbGV0IGFwcDogSU5lc3RBcHBsaWNhdGlvbjtcbiAgbGV0IHRva2VuOiBzdHJpbmc7XG5cbiAgY29uc3QgYmFzZSA9ICgpID0+IHJlcXVlc3QoYXBwLmdldEh0dHBTZXJ2ZXIoKSk7XG4gIGNvbnN0IGJhc2VIZWFkZXJzID0geyAneC1vcmcnOiBPUkcsICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfTtcblxuICBhc3luYyBmdW5jdGlvbiBzaWdudXAoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gQWNjZXB0IDIwMSBDcmVhdGVkIG9yIDQwOSBDb25mbGljdCAoYWxyZWFkeSBleGlzdHMpXG4gICAgYXdhaXQgYmFzZSgpXG4gICAgICAucG9zdCgnL2F1dGgvc2lnbnVwJylcbiAgICAgIC5zZXQoYmFzZUhlYWRlcnMpXG4gICAgICAuc2VuZCh7IGVtYWlsOiBFTUFJTCwgcGFzc3dvcmQ6IFBBU1MsIG5hbWU6ICdJbnZlbnRvcnkgVGVzdGVyJyB9KVxuICAgICAgLm9rKHJlcyA9PiByZXMuc3RhdHVzID09PSAyMDEgfHwgcmVzLnN0YXR1cyA9PT0gNDA5KTtcbiAgfVxuXG4gIGFzeW5jIGZ1bmN0aW9uIGxvZ2luKCk6IFByb21pc2U8UmVzcG9uc2U+IHtcbiAgICByZXR1cm4gYmFzZSgpXG4gICAgICAucG9zdCgnL2F1dGgvbG9naW4nKVxuICAgICAgLnNldChiYXNlSGVhZGVycylcbiAgICAgIC5zZW5kKHsgZW1haWw6IEVNQUlMLCBwYXNzd29yZDogUEFTUyB9KTtcbiAgfVxuXG4gIGFzeW5jIGZ1bmN0aW9uIGVuc3VyZUxvZ2luKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgLy8gVHJ5IGxvZ2luOyBpZiB1bmF1dGhvcml6ZWQsIChyZSlzaWdudXAgd2l0aCB0aGUgZnJlc2ggZW1haWwgYW5kIHJldHJ5LlxuICAgIGxldCByZXMgPSBhd2FpdCBsb2dpbigpO1xuICAgIGlmIChyZXMuc3RhdHVzID09PSA0MDEpIHtcbiAgICAgIGF3YWl0IHNpZ251cCgpO1xuICAgICAgcmVzID0gYXdhaXQgbG9naW4oKTtcbiAgICB9XG4gICAgaWYgKCEocmVzLnN0YXR1cyA9PT0gMjAwIHx8IHJlcy5zdGF0dXMgPT09IDIwMSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTG9naW4gZmFpbGVkOiBleHBlY3RlZCAyMDAvMjAxLCBnb3QgJHtyZXMuc3RhdHVzfSAoJHtyZXMudGV4dH0pYCk7XG4gICAgfVxuICAgIGNvbnN0IHRrOiBzdHJpbmcgfCB1bmRlZmluZWQgPSByZXMuYm9keT8uYWNjZXNzX3Rva2VuO1xuICAgIGlmICghdGspIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBhY2Nlc3NfdG9rZW46ICR7SlNPTi5zdHJpbmdpZnkocmVzLmJvZHkpfWApO1xuICAgIHJldHVybiB0aztcbiAgfVxuXG4gIGJlZm9yZUFsbChhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbW9kdWxlUmVmID0gYXdhaXQgVGVzdC5jcmVhdGVUZXN0aW5nTW9kdWxlKHtcbiAgICAgIGltcG9ydHM6IFtBcHBNb2R1bGVdLFxuICAgIH0pLmNvbXBpbGUoKTtcblxuICAgIGFwcCA9IG1vZHVsZVJlZi5jcmVhdGVOZXN0QXBwbGljYXRpb24oKTtcbiAgICBhd2FpdCBhcHAuaW5pdCgpO1xuXG4gICAgYXdhaXQgc2lnbnVwKCk7XG4gICAgdG9rZW4gPSBhd2FpdCBlbnN1cmVMb2dpbigpO1xuICB9KTtcblxuICBhZnRlckFsbChhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgYXBwLmNsb3NlKCk7XG4gIH0pO1xuXG4gIGl0KCdsaXN0cyBwcm9kdWN0cyBhbmQgYWRqdXN0cyBpbnZlbnRvcnkgKzUsIHRoZW4gcmVqZWN0cyBuZWdhdGl2ZSBvdmVyc2hvb3QnLCBhc3luYyAoKSA9PiB7XG4gICAgLy8gMSkgTGlzdCBwcm9kdWN0c1xuICAgIGNvbnN0IGxpc3QgPSBhd2FpdCBiYXNlKClcbiAgICAgIC5nZXQoJy9wcm9kdWN0cycpXG4gICAgICAuc2V0KHsgLi4uYmFzZUhlYWRlcnMsIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbn1gIH0pXG4gICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICBjb25zdCBpdGVtcyA9IGxpc3QuYm9keT8uZGF0YSA/PyBbXTtcbiAgICBleHBlY3QoQXJyYXkuaXNBcnJheShpdGVtcykpLnRvQmUodHJ1ZSk7XG4gICAgZXhwZWN0KGl0ZW1zLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuXG4gICAgY29uc3QgcHJvZHVjdCA9IGl0ZW1zWzBdO1xuICAgIGV4cGVjdChwcm9kdWN0KS50b0hhdmVQcm9wZXJ0eSgnaWQnKTtcbiAgICBleHBlY3QodHlwZW9mIHByb2R1Y3QuaW52ZW50b3J5UXR5KS50b0JlKCdudW1iZXInKTtcblxuICAgIC8vIDIpIEFkanVzdCArNSAoYWNjZXB0IDIwMCBvciAyMDEgZGVwZW5kaW5nIG9uIGltcGxlbWVudGF0aW9uKVxuICAgIGNvbnN0IHVwID0gYXdhaXQgYmFzZSgpXG4gICAgICAucG9zdChgL3Byb2R1Y3RzLyR7cHJvZHVjdC5pZH0vaW52ZW50b3J5YClcbiAgICAgIC5zZXQoeyAuLi5iYXNlSGVhZGVycywgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VufWAgfSlcbiAgICAgIC5zZW5kKHsgZGVsdGE6IDUgfSlcbiAgICAgIC5vayhyID0+IHIuc3RhdHVzID09PSAyMDAgfHwgci5zdGF0dXMgPT09IDIwMSk7XG5cbiAgICBjb25zdCBuZXdRdHkgPSB1cC5ib2R5Py5pbnZlbnRvcnlRdHk7XG4gICAgZXhwZWN0KHR5cGVvZiBuZXdRdHkpLnRvQmUoJ251bWJlcicpO1xuICAgIGV4cGVjdChuZXdRdHkpLnRvQmUocHJvZHVjdC5pbnZlbnRvcnlRdHkgKyA1KTtcblxuICAgIC8vIDMpIEF0dGVtcHQgbmVnYXRpdmUgb3ZlcnNob290IChzaG91bGQgNDAwKVxuICAgIGNvbnN0IG5lZ0RlbHRhID0gLShuZXdRdHkgKyAxKTtcbiAgICBhd2FpdCBiYXNlKClcbiAgICAgIC5wb3N0KGAvcHJvZHVjdHMvJHtwcm9kdWN0LmlkfS9pbnZlbnRvcnlgKVxuICAgICAgLnNldCh7IC4uLmJhc2VIZWFkZXJzLCBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW59YCB9KVxuICAgICAgLnNlbmQoeyBkZWx0YTogbmVnRGVsdGEgfSlcbiAgICAgIC5leHBlY3QoNDAwKTtcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=